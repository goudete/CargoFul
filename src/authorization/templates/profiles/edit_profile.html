{% extends 'shipper/base.html'%}
{% load static %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block content %}

<!-- Welcome and Successful order messages -->
{% if messages %}
{% for message in messages %}
{% if message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
<div class="row justify-content-center alert alert-primary pt-3 pb-3" role="alert">
  <!-- <div class="card shadow p-3 m-2 bg-white rounded" style="width: 25rem;"> -->
    <div class="col-md-8">
      <h4>{{ message }}</h4>
    </div>
  <!-- </div> -->
</div>
{% endif %}

{% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
<div class="row justify-content-center alert alert-primary pt-3 pb-3" role="alert">
  <!-- <div class="card shadow p-3 mb-5 bg-white rounded" style="width: 25rem;"> -->
    <div class="col-md-8">
      <h4>{{ message }}</h4>
    </div>
  <!-- </div> -->
</div>
{% endif %}

{% endfor %}
{% endif %}
<!-- messages end here -->

<!-- Pending Account Acceptance Message -->
{% if company.user.profile.is_approved == False %}
<div class="row justify-content-center mt-3">
  <div class="col-md-8">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">{% trans "Your Account is Pending Approval" %}</h5>
        <p class="card-text">
          {% trans "Reach out if you have any questions: help@cargoful.org" %}
        </p>
      </div>
    </div>
  </div>
</div>
{% endif %}
<!-- Pending Account Acceptance Message Ends -->


<style>
  #table tbody{
    height: 300px;
    overflow-y: auto;
  }
  #table thead th{
    position: sticky;
    position: -webkit-sticky;
    top: 0;
    z-index: 5;
    background-color: white;
    color: black;
  }

  #subbutton{
    visibility: hidden;
  }

  svg:hover {
  fill: gray;
  cursor: pointer;
}
</style>

<!-- <div class="row justify-content-center mt-5">
  <div class="col-md-10">
    <h3>{% trans "My Orders" %}</h3>
  </div>
</div> -->

<!-- <div class="row justify-content-center pt-2">
  <div class="col-md-10">
    <p><b>{% trans "Total Orders" %}: {{set.count}}</b></p>
  </div> -->

  <!-- <div class="col-md-10">
    {% if  company.user.profile.is_approved == True %}
    <a href="/shipper/post_order" class="btn btn-secondary btn-lg active" role="button" aria-pressed="true">{% trans "New Order" %}</a>
    {% endif %}
  </div> -->
<!-- </div> -->

 <div class="container py-3">
    <div class="row">
        <div class="mx-auto col-sm-6">
                    <!-- form user info -->
                    <div class="card">
                        <div class="card-header">
                            <h4 class="mb-0">User Information</h4>
                        </div>
                        <div class="card-body">
                            <form class="form" method = "post" role="form" autocomplete="off">
                              {% csrf_token %}
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">First name</label>
                                    <div class="col-lg-9">
                                        <div id = "first_name_field" >
                                          {{form.first_name | as_crispy_field}}
                                        </div>
                                        <label for="first_name_field">Current : {{request.user.first_name}}</label>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Last name</label>
                                    <div class="col-lg-9">
                                      <div id = "last_name_field" >
                                        {{form.last_name | as_crispy_field}}
                                      </div>
                                        <label for="last_name_field">Current : {{request.user.last_name}}</label>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Email</label>
                                    <div class="col-lg-9">
                                      <div id = "email_field" >
                                        {{form.email | as_crispy_field}}
                                      </div>
                                        <label for="email_field">Current : {{request.user.email}}</label>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Company</label>
                                    <div class="col-lg-9">
                                      <div id = "email_field" >
                                        {{form.company_name | as_crispy_field}}
                                      </div>
                                        <label for="email_field">{% trans "Current" %} : {{request.user.profile.company_name}}</label>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Username</label>
                                    <div class="col-lg-9">
                                      <div id = "email_field" >
                                        {{form.username | as_crispy_field}}
                                      </div>
                                        <label for="email_field">{% trans "Current" %} : {{request.user.username}}</label>
                                    </div>
                                </div>
                                <div class="form-group row">
                                  <label class="col-lg-3 col-form-label form-control-label"></label>
                                    <div class="col-lg-9">
                                        <input name = "info_submit" type="submit" class="btn btn-primary" value="Save Changes">
                                    </div>
                                </div>
                              </form>
                              <form method = "post">
                                {% csrf_token %}
                                <div class="card-header">
                                    <h4 class="mb-0">Change Password</h4>
                                </div>
                                <br>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Old Password</label>
                                    <div class="col-lg-9">
                                        {{pform.old_password | as_crispy_field}}
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">New Password</label>
                                    <div class="col-lg-9">
                                        {{pform.new_password1 | as_crispy_field}}
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Confirm New Password</label>
                                    <div class="col-lg-9">
                                        {{pform.new_password2 | as_crispy_field}}
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label"></label>
                                    <div class="col-lg-9">
                                        <input name = "password_submit" type="submit" class="btn btn-primary" value="Change Password">
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- /form user info -->
        </div>
    </div>
</div>
<!-- https://medium.com/wdstack/bootstrap-4-form-examples-c18ac5e9cd30 -->
{% endblock %}
